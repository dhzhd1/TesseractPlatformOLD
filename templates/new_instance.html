{% extends 'layout.html' %}
{% block main_container %}
      <!-- Breadcrumbs-->
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href={{ url_for('dashboard') }}>Dashboard</a>
        </li>
        <li class="breadcrumb-item active">Create New Instance</li>
      </ol>
      <hr>
      {%  if result == "succeed" %}
        <div class="alert-success alert-dismissable">
            <span >New instance created successfully! You can find this instance under 'Instance Management'.</span>
        </div>
      {% elif result == "failed" %}
        <div class="alert-warning alert-dismissable">
            <span >Failed to create the instance. Please check the input parameters and try again.</span>
        </div>
      {% endif %}
      <!-- content start from here -->
      <div class="card card-register mx-auto mt-5">
          <div class="card-header">Create a new Instance</div>
          <div class="card-body">
            <form>
                {{ form.hidden_tag() }}
              <div class="form-group">
                <div class="form-row">
                  <div class="col-md-6">
                      {{ form.instance_name.label }}
                      {{ form.instance_name(class_="form-control", id='instanceName', placeholder="Enter Instance Name") }}
                  </div>
                  <div class="col-md-6">
                      {{ form.instance_owner.label }}
                      {{ form.instance_owner(class_='form-control', id='instanceOwner', readonly=true, value=current_user.username) }}
                  </div>
                </div>
              </div>
              <div class="form-group">
                  <div class="form-row">
                      <div class="col-md-4">
                          {{ form.image_repository.label }}
                          {{ form.image_repository(class_='custom-select', id='imageRepo') }}
                      </div>
                      <div class="col-md-4">
                          {{ form.image_tag.label }}
                          {{ form.image_tag(class_='custom-select', id='imageTag') }}
                      </div>
                      <div class="col-md-4">
                          {{ form.image_id.label }}
                          {{ form.image_id(class_='form-control', id='imageID', readonly=true, placeholder="Image ID") }}
                      </div>
                  </div>
              </div>
              <div class="form-group">
                <label class="form-check-label">
                    {{ form.need_gpu(class_="form-check-input") }}
                    {{ form.need_gpu.label }}
                </label>
              </div>
              <div class="form-group">
                  {{ form.select_gpu.label }}
                  {{ form.select_gpu(class_='form-control') }}
              </div>
              <a class="btn btn-primary btn-block" href={{ url_for('new_instance') }}>Create Instance</a>
            </form>
          </div>
      </div>
      <!-- content end from here -->
      <!-- Blank div to give the page height to preview the fixed vs. static navbar-->
{#      <div style="height: 1000px;"></div>#}
{% endblock main_container %}

{#{% block customized_scripts %}#}
{# script: 1. change image tags when repository selection changes
2. image id should change when image tag changes
3. Need GPU resource should control the 'selectGPU' show and hide
4. add default value of need gpu resource to true.#}
{#{% blockend customized_scripts %}#}